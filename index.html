<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Случайный граф.</title>

    <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.18.1/vis.min.js"></script>

    <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.18.1/vis.min.css">

    <style type="text/css">
        #container {
            width: 80%;
            margin: 10px auto;
        }

        #mynetwork, #mynetwork_text {
            width: 49%;
            height: 600px;
            border: 1px solid lightgray;
            /*margin: 10px 0;*/
            display: inline-block;
        }

        #mynetwork_text {
            overflow: auto;
            background-color: #EEE;
            padding: 10px;
        }

        table td {
            vertical-align: top;
        }

        #mynetwork_text table td {
            border: 1px steelblue dashed;
        }

    </style>

</head>
<body>

<div id="container">
    <table style="width: 100%">
        <tr>
            <td>
                <table>
                    <tr>
                        <td>
                            <label for="nodes">Вершин:</label>
                        </td>
                        <td>
                            <input type="text" maxlength="3" id="nodes" value="5">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="edges">Рёбер:</label>
                        </td>
                        <td>
                            <input type="text" maxlength="3" id="edges" value="5">
                        </td>
                    </tr>
                </table>
            </td>
            <td>
                <label for="simple">Простой граф: <input type="checkbox" id="simple" checked="checked"></label><br>
                <label for="connected">Cвязный граф: <input type="checkbox" id="connected" checked="checked"></label>
            </td>
            <td>
                <button id="generate">Сгенерировать случайный граф</button>
            </td>
        </tr>
    </table>
    <div id="mynetwork"></div>
    <div id="mynetwork_text"></div>

</div>

<script type="text/javascript">
    $(function () {
        function graph() {
            /**
             * Returns a random integer between min (inclusive) and max (inclusive)
             * Using Math.round() will give you a non-uniform distribution!
             */
            function getRandomInt(min, max) {
                return Math.floor(Math.random() * (max - min + 1)) + min;
            }

            function getEdgesNodes() {
                return {
                    'nodes': $("#nodes").val(),
                    'edges': $("#edges").val()
                };
            }

            function mkNodeValues(edgesNodes) {
                var nodeValues = [];
                for (var i = 1; i <= edgesNodes.nodes; ++i) {
                    nodeValues.push({id: i, label: 'Узел ' + i});
                }
                return nodeValues;
            }

            function mkEdgeValues(edgesNodes) {
                var edgeValues = [];
                for (i = 1; i <= edgesNodes.edges; ++i) {
                    var from = getRandomInt(1, edgesNodes.nodes);
                    var to = getRandomInt(1, edgesNodes.nodes);
                    edgeValues.push({from: from, to: to});
                }
                return edgeValues;
            }

            function showTextData(edgesNodes, nodes, edges) {
                var id;
                var s = "Вершин: " + edgesNodes.nodes + "; Рёбер: " + edgesNodes.edges + ".<br><br>"
                        + "Вершины:<br>"
                        + "<table><th><td>ID</td><td>Степень</td><td>Рёбра</td></th>";
                for (id in nodes) {
                    s += "<tr><td>" + nodes[id].id + "</td><td></td><td></td></tr>";
                }
                s += "</table><br><br>Рёбра:<br>"
                        + "<table><th><td>ID</td><td>Вершины</td></th>";

                for (id in edges) {
                    s += "<tr><td>" + id + "</td><td>" + edges[id].from + " - " + edges[id].to + "</td></tr>";
                }

                s += "</table><br>";

                $("#mynetwork_text").html(s);
            }

            return {
                generateRandom: function () {
                    var edgesNodes = getEdgesNodes();

                    var nodeValues = mkNodeValues(edgesNodes);
                    var edgeValues = mkEdgeValues(edgesNodes);

                    var nodes = new vis.DataSet(nodeValues);
                    var edges = new vis.DataSet(edgeValues);

                    showTextData(edgesNodes, nodeValues, edgeValues);

                    // create a network
                    var container = document.getElementById('mynetwork');
                    var data = {
                        nodes: nodes,
                        edges: edges
                    };
                    var options = {};
                    var network = new vis.Network(container, data, options);
                }
            }
        }

        var gr = new graph;
        gr.generateRandom();

        $("#generate").click(function () {
            gr.generateRandom();
        });
    });

</script>

</body>
</html>